---
import type { ProductData } from "../lib/products";

interface Props {
	product: ProductData;
}

const { product } = Astro.props;
---

<div class="flex items-center justify-end gap-2">
	<label for="version-switcher" class="sr-only">Version</label>
	<select
		class="px-2 py-1 rounded bg-transparent text-stone-400 font-medium"
		id="version-switcher"
	>
		<option value="cheerpj3" selected={product.id === "cheerpj3"}>v4.2</option>
		<option value="cheerpj2" selected={product.id === "cheerpj2"}>v2.3</option>
	</select>
</div>

<script>
	const select = document.getElementById("version-switcher") as
		| HTMLSelectElement
		| undefined;
	select?.addEventListener("change", async () => {
		if (select.value === "cheerpj3") {
			location.href = "https://cheerpj.com/docs";
		} else if (select.value === "cheerpj2") {
			location.href = "https://labs.leaningtech.com/docs/cheerpj2";
		}
	});
</script>
